@model CarServiceTracking.UI.Web.Models.ApiModels.RentalApiModels.RentalVehicleDetailApiModel

@{
    ViewData["Title"] = "Araç Detayı";
    Layout = "~/Views/Shared/_CustomerLayout.cshtml";
}

@* CSS customer.css'te tanımlı *@

<section class="py-4">
    <div class="container-fluid">

        <div class="d-flex justify-content-between align-items-center mb-4">
            <div>
                <h2 class="fw-bold mb-1">
                    <i class="fa-solid fa-car text-primary me-2"></i>
                    Araç Detayı
                </h2>
                <p class="text-muted mb-0">@Model.Brand @Model.Model detaylı bilgileri</p>
            </div>
            <a href="/Customer/CarsList/Index" class="btn btn-outline-secondary">
                <i class="fa-solid fa-arrow-left me-1"></i>
                Listeye Dön
            </a>
        </div>

        <div class="row">
            <div class="col-lg-8">
                @* Araç Resmi *@
                @if (!string.IsNullOrEmpty(Model.ImageUrl))
                {
                    <div class="card mb-4">
                        <img src="@Model.ImageUrl"
                             alt="@Model.Brand @Model.Model"
                             class="card-img-top vehicle-detail-image"
                             onerror="this.onerror=null; this.src='https://via.placeholder.com/800x400/343a40/ffffff?text=@(Model.Brand)+@(Model.Model)';">
                    </div>
                }

                <div class="card mb-4">
                    <div class="card-body">
                        <div class="d-flex justify-content-between align-items-start mb-4">
                            <div>
                                <h3 class="fw-bold mb-2">@Model.Brand @Model.Model</h3>
                                <p class="text-muted mb-0">@Model.Year Model</p>
                            </div>
                            @if (Model.IsAvailable)
                            {
                                <span class="badge bg-success fs-6">Müsait</span>
                            }
                            else
                            {
                                <span class="badge bg-secondary fs-6">Kirada</span>
                            }
                        </div>

                        <div class="row g-3">
                            <div class="col-md-6">
                                <div class="detail-box">
                                    <i class="fa-solid fa-hashtag text-primary me-2"></i>
                                    <div>
                                        <small class="text-muted">Plaka</small>
                                        <div class="fw-bold">@Model.PlateNumber</div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="detail-box">
                                    <i class="fa-solid fa-palette text-primary me-2"></i>
                                    <div>
                                        <small class="text-muted">Renk</small>
                                        <div class="fw-bold">@Model.Color</div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="detail-box">
                                    <i class="fa-solid fa-gas-pump text-primary me-2"></i>
                                    <div>
                                        <small class="text-muted">Yakıt Tipi</small>
                                        <div class="fw-bold">@(Model.FuelType ?? "Belirtilmemiş")</div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="detail-box">
                                    <i class="fa-solid fa-gears text-primary me-2"></i>
                                    <div>
                                        <small class="text-muted">Vites</small>
                                        <div class="fw-bold">@(Model.TransmissionType ?? "Belirtilmemiş")</div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="detail-box">
                                    <i class="fa-solid fa-tachometer-alt text-primary me-2"></i>
                                    <div>
                                        <small class="text-muted">Kilometre</small>
                                        <div class="fw-bold">@Model.Mileage.ToString("N0") km</div>
                                    </div>
                                </div>
                            </div>

                            <div class="col-md-6">
                                <div class="detail-box">
                                    <i class="fa-solid fa-calendar text-primary me-2"></i>
                                    <div>
                                        <small class="text-muted">Ekleme Tarihi</small>
                                        <div class="fw-bold">@Model.CreatedDate.ToString("dd.MM.yyyy")</div>
                                    </div>
                                </div>
                            </div>
                        </div>

                        @if (!string.IsNullOrWhiteSpace(Model.Notes))
                        {
                            <div class="mt-4">
                                <h5 class="fw-bold mb-2">Notlar</h5>
                                <p class="text-muted">@Model.Notes</p>
                            </div>
                        }
                    </div>
                </div>
            </div>

            <div class="col-lg-4">
                <div class="card">
                    <div class="card-body">
                        <h5 class="fw-bold mb-3">Kiralama Bilgileri</h5>
                        
                        <div class="price-box mb-4">
                            <small class="text-muted">Günlük Ücret</small>
                            <h2 class="fw-bold text-primary mb-0">@Model.DailyRate.ToString("C2")</h2>
                            <small class="text-muted">/ Gün</small>
                        </div>

                        @if (Model.IsAvailable)
                        {
                            <a href="/Customer/Rentals/Create?carId=@Model.Id" 
                               class="btn btn-primary w-100 mb-2">
                                <i class="fa-solid fa-plus-circle me-1"></i>
                                Kirala
                            </a>
                        }
                        else
                        {
                            <button class="btn btn-secondary w-100 mb-2" disabled>
                                <i class="fa-solid fa-ban me-1"></i>
                                Şu Anda Müsait Değil
                            </button>
                        }

                        <a href="/Customer/CarsList/Index" class="btn btn-outline-secondary w-100">
                            <i class="fa-solid fa-arrow-left me-1"></i>
                            Listeye Dön
                        </a>

                        <div class="mt-4 p-3 bg-light rounded">
                            <small class="text-muted">
                                <i class="fa-solid fa-info-circle me-1"></i>
                                Kiralama işlemi için araç müsait olmalıdır. 
                                Günlük ücret üzerinden toplam tutar hesaplanacaktır.
                            </small>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
</section>

<style>
    .detail-box {
        display: flex;
        align-items: center;
        padding: 1rem;
        background: #f8f9fa;
        border-radius: 8px;
        height: 100%;
    }

    .detail-box i {
        font-size: 1.5rem;
    }

    .price-box {
        text-align: center;
        padding: 1.5rem;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        border-radius: 12px;
    }

    .price-box small {
        color: rgba(255,255,255,0.8);
    }

    .price-box h2 {
        color: white !important;
    }

    .vehicle-detail-image {
        max-height: 400px;
        object-fit: cover;
        width: 100%;
        border-radius: 15px 15px 0 0;
    }
</style>
